<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eazy Hosting - ‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î</title>
    <style>
        /* Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f4f7f9;
            color: #333;
            line-height: 1.6;
        }

        /* Navigation Bar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background-color: #2c3e50;
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .logo {
            font-size: 1.6em;
            font-weight: bold;
        }

        .navbar a {
            color: white;
            text-decoration: none;
            margin-left: 25px;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .navbar a:hover {
            background-color: #34495e;
        }

        /* Main Container */
        .main-content {
            max-width: 1000px;
            margin: 30px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        h2 {
            color: #007bff;
            margin-bottom: 25px;
            font-weight: 600;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            text-align: center;
        }

        h3 {
            color: #2c3e50;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        /* Renewal Section (‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ Free Tier) */
        .renewal-box {
            background-color: #fff3cd; /* ‡∏™‡∏µ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô */
            color: #856404;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #ffeeba;
            margin-bottom: 40px;
            text-align: center;
        }

        .renewal-box p {
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .renew-btn {
            background-color: #f39c12; /* ‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ */
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 6px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .renew-btn:hover {
            background-color: #e67e22;
        }

        /* Pricing Grid (‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î Premium) */
        .pricing-grid {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .package-card {
            flex: 1;
            background-color: #f9f9f9;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            text-align: center;
            border: 3px solid #ddd;
        }

        .package-card.highlight {
            border-color: #2ecc71; /* ‡πÄ‡∏ô‡πâ‡∏ô‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ */
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
            background-color: #e8f8f5;
        }

        .package-card h4 {
            font-size: 1.8em;
            color: #3498db;
            margin-bottom: 10px;
        }

        .price {
            font-size: 3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .price small {
            font-size: 0.5em;
            font-weight: normal;
            color: #777;
        }

        .features-list {
            list-style: none;
            text-align: left;
            margin-bottom: 25px;
        }

        .features-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .features-list li:before {
            content: "‚úì";
            color: #2ecc71;
            font-weight: bold;
            margin-right: 10px;
        }

        .upgrade-btn {
            width: 100%;
            padding: 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .upgrade-btn:hover {
            background-color: #2980b9;
        }

        .upgrade-btn.green {
            background-color: #2ecc71;
        }

        .upgrade-btn.green:hover {
            background-color: #27ae60;
        }

    </style>
</head>
<body>

<header class="navbar">
    <div class="logo">Eazy Hosting üöÄ</div>
    <nav>
        <a href="dashboard.html">Dashboard</a>
        <a href="account.html">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</a>
        <a href="index.html">Logout</a>
    </nav>
</header>

<div class="main-content">
    <h2>üîÑ ‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÅ‡∏ú‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h2>

    <div class="renewal-box" id="renewalBoxContainer"> <h3>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Free Tier Server...</h3>
    </div>

    <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô Premium ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô</h3>

    <div class="pricing-grid">

        <div class="package-card">
            <h4>Standard (S1)</h4>
            <div class="price">
                ‡∏ø399<small>/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</small>
            </div>
            <ul class="features-list">
                <li>2 Core CPU</li>
                <li>4 GB RAM</li>
                <li>50 GB SSD Storage</li>
                <li>Bandwidth ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</li>
            </ul>
            <button class="upgrade-btn" data-package-name="Standard">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô Standard</button>
        </div>

        <div class="package-card highlight">
            <h4 style="color: #2ecc71;">Pro (P2) - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥!</h4>
            <div class="price">
                ‡∏ø799<small>/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</small>
            </div>
            <ul class="features-list">
                <li>4 Core CPU</li>
                <li>8 GB RAM</li>
                <li>100 GB SSD Storage</li>
                <li>Bandwidth ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</li>
            </ul>
            <button class="upgrade-btn green" data-package-name="Pro">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô Pro</button>
        </div>

        <div class="package-card">
            <h4>Business (B4)</h4>
            <div class="price">
                ‡∏ø1,499<small>/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</small>
            </div>
            <ul class="features-list">
                <li>8 Core CPU</li>
                <li>16 GB RAM</li>
                <li>250 GB SSD Storage</li>
                <li>Bandwidth ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</li>
            </ul>
            <button class="upgrade-btn" data-package-name="Business">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô Business</button>
        </div>

    </div>

</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const API_SERVER_URL = '/api/v1/server';
        const renewalContainer = document.getElementById('renewalBoxContainer'); // <--- ‡∏≠‡πâ‡∏≤‡∏á‡∏ñ‡∏∂‡∏á ID ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß
        const pricingGrid = document.querySelector('.pricing-grid');
        let serverIdToRenew = null; // ID ‡∏Ç‡∏≠‡∏á Free Tier Server

        // ‡πÅ‡∏™‡∏î‡∏á Loading State ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å
        renewalContainer.innerHTML = '<h3>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Free Tier Server...</h3>';

        // ----------------------------------------------------------------------
        // 1. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        // ----------------------------------------------------------------------
        function displayMessage(area, message, isSuccess) {
            const messageDiv = area.querySelector('#messageArea') || document.createElement('div');
            messageDiv.id = 'messageArea';
            messageDiv.style.color = isSuccess ? 'green' : 'red';
            messageDiv.style.fontWeight = 'bold';
            messageDiv.textContent = message;
            area.appendChild(messageDiv);
            setTimeout(() => {
                if (messageDiv.parentNode) messageDiv.remove();
            }, 5000);
        }

        // ----------------------------------------------------------------------
        // 2. ‡∏î‡∏∂‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (GET /api/v1/server/status-for-renewal)
        // ----------------------------------------------------------------------
        function fetchServerStatus() {
            fetch(`${API_SERVER_URL}/status-for-renewal`)
                .then(response => {
                    if (response.status === 401) { window.location.href = '/login.html'; return null; }
                    if (!response.ok) throw new Error('Failed to fetch status');
                    return response.json();
                })
                .then(data => {
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend ‡∏™‡πà‡∏á Server ID ‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                    if (data && data.serverId) {
                        serverIdToRenew = data.serverId; // ‡πÄ‡∏Å‡πá‡∏ö ID ‡πÑ‡∏ß‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏

                        // ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
                        let expiryDateString = data.expiryDate;
                        if (expiryDateString && expiryDateString.includes('[')) {
                            // ‡∏´‡∏≤‡∏Å Backend ‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô JSON Array ‡∏Ç‡∏≠‡∏á [‡∏õ‡∏µ, ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô, ‡∏ß‡∏±‡∏ô, ... ] ‡πÄ‡∏ä‡πà‡∏ô 2025-11-15T12:00:00.000000
                            // ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô format ‡∏ó‡∏µ‡πà JavaScript ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à
                            expiryDateString = expiryDateString.split('[')[0]; // ‡∏ï‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏≠‡∏≠‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                        }
                        const expiryDate = new Date(expiryDateString).toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' });

                        // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á
                        renewalContainer.innerHTML = `
                            <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Free Tier Server ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                            <p>‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå <strong>(${data.ipAddress || '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î IP'})</strong> ‡∏à‡∏∞‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <strong>${expiryDate}</strong></p>
                            <p>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ **‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ Free Tier** ‡πÑ‡∏î‡πâ‡∏ü‡∏£‡∏µ‡∏ó‡∏∏‡∏Å ‡πÜ 30 ‡∏ß‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠</p>
                            <button class="renew-btn" id="actualRenewBtn">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ 30 ‡∏ß‡∏±‡∏ô</button>
                            <small style="display: block; margin-top: 10px; color: #a17f22;">* ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</small>
                        `;

                        // ‡∏ú‡∏π‡∏Å event listener ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
                        document.getElementById('actualRenewBtn').addEventListener('click', handleRenewal);
                    } else {
                        // ‡πÑ‡∏°‡πà‡∏û‡∏ö Server (Backend ‡∏™‡πà‡∏á {"message": "No active Free Tier server found."} ‡∏´‡∏£‡∏∑‡∏≠ ‡πÑ‡∏°‡πà‡∏°‡∏µ serverId)
                        renewalContainer.innerHTML = `
                            <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Free Tier Server ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                            <p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå Free Tier ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà Dashboard</p>
                        `;
                    }
                })
                .catch(error => {
                    console.error('Error fetching status:', error);
                    renewalContainer.innerHTML = '<p style="color:red; text-align:center;">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏î‡πâ</p>';
                });
        }

        // ----------------------------------------------------------------------
        // 3. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ (PUT /api/v1/server/{serverId}/action?action=renew)
        // ----------------------------------------------------------------------
        function handleRenewal() {
            if (!serverIdToRenew) {
                displayMessage(renewalContainer, '‡πÑ‡∏°‡πà‡∏û‡∏ö Server ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏', false);
                return;
            }

            fetch(`${API_SERVER_URL}/${serverIdToRenew}/action?action=renew`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' }
            })
                .then(response => response.json().then(data => ({ status: response.status, body: data })))
                .then(result => {
                    const isSuccess = result.status === 200;
                    displayMessage(renewalContainer, result.body.message || (isSuccess ? '‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß'), isSuccess);
                    // ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏
                    if (isSuccess) setTimeout(fetchServerStatus, 2000);
                })
                .catch(error => {
                    displayMessage(renewalContainer, '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏', false);
                    console.error('Renewal Error:', error);
                });
        }

        // ----------------------------------------------------------------------
        // 4. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î (POST /api/v1/server/upgrade)
        // ----------------------------------------------------------------------
        pricingGrid.addEventListener('click', function(e) {
            if (!e.target.classList.contains('upgrade-btn')) return;

            if (!serverIdToRenew) {
                alert('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå Free Tier ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ');
                return;
            }

            const card = e.target.closest('.package-card');
            // ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏à‡∏≤‡∏Å data attribute (‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ H4 ‡∏Å‡πá‡πÑ‡∏î‡πâ)
            const packageName = e.target.getAttribute('data-package-name') || card.querySelector('h4').textContent.split(' ')[0];

            if (confirm(`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå (ID: ${serverIdToRenew}) ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ú‡∏ô ${packageName} ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? (‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô)`)) {
                fetch(`${API_SERVER_URL}/upgrade`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        packageName: packageName,
                        serverId: serverIdToRenew.toString() // ‡∏™‡πà‡∏á ID ‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î
                    })
                })
                    .then(response => response.json().then(data => ({ status: response.status, body: data })))
                    .then(result => {
                        const isSuccess = result.status === 200;
                        alert(`${isSuccess ? '‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‚ùå ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß'}: ${result.body.message || '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô'}`);
                        // ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î
                        if (isSuccess) fetchServerStatus();
                    })
                    .catch(error => {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î');
                        console.error('Upgrade Error:', error);
                    });
            }
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡∏∂‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
        fetchServerStatus();
    });
</script>
</body>
</html>